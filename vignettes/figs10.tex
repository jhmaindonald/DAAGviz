\documentclass[12pt, a4paper,  BCOR=8.25mm, DIV=15]{scrartcl}\usepackage[]{graphicx}\usepackage[]{color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\usepackage[utf8]{inputenc}

\newenvironment{itemizz}%
  {\begin{itemize}%
    \setlength{\itemsep}{2pt}%
    \setlength{\parskip}{2pt}}%
  {\end{itemize}}

\newcommand{\txtt}[1]{{\texttt{#1}}}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{Dynamic Interaction with Graphs (Set 10)}



\title{10: Dynamic Interaction with Graphs}
\author{John H Maindonald}
\maketitle

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{doFigs} \hlkwb{<-} \hlnum{FALSE}
\end{alltt}
\end{kframe}
\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{fig10.1} \hlkwb{<-} \hlkwa{function}\hlstd{()\{}
\hlcom{## ---- rgl-demo ----}
\hlcom{## The Rcmdr and rgl packages must be installed}
\hlkwa{if}\hlstd{(}\hlopt{!}\hlkwd{requireNamespace}\hlstd{(}\hlstr{'rgl'}\hlstd{,} \hlkwc{quietly}\hlstd{=}\hlnum{TRUE}\hlstd{))}\hlkwd{stop}\hlstd{(}\hlstr{"Package 'rgl' must be available."}\hlstd{)}
\hlkwa{if}\hlstd{(}\hlopt{!}\hlkwd{requireNamespace}\hlstd{(}\hlstr{'car'}\hlstd{,} \hlkwc{quietly}\hlstd{=}\hlnum{TRUE}\hlstd{))}\hlkwd{stop}\hlstd{(}\hlstr{"Package 'car' must be available."}\hlstd{)}
\hlkwa{if}\hlstd{(}\hlopt{!}\hlkwd{require}\hlstd{(DAAG,} \hlkwc{quietly}\hlstd{=}\hlnum{TRUE}\hlstd{))}\hlkwd{stop}\hlstd{(}\hlstr{"Package 'DAAG' must be available."}\hlstd{)}
\hlstd{rgl}\hlopt{::}\hlkwd{open3d}\hlstd{()}            \hlcom{# Precedes the call to par3d()}
\hlstd{rgl}\hlopt{::}\hlkwd{par3d}\hlstd{(}\hlkwc{cex}\hlstd{=}\hlnum{0.75}\hlstd{)}     \hlcom{# Optional}
                         \hlcom{# Other params: see help(par3d)}
\hlkwd{with}\hlstd{(nihills, car}\hlopt{::}\hlkwd{scatter3d}\hlstd{(}\hlkwc{x}\hlstd{=}\hlkwd{log}\hlstd{(dist),} \hlkwc{y}\hlstd{=}\hlkwd{log}\hlstd{(climb),}
                        \hlkwc{z}\hlstd{=}\hlkwd{log}\hlstd{(time),}
                        \hlkwc{grid}\hlstd{=}\hlnum{FALSE}\hlstd{,}
                        \hlkwc{surface}\hlstd{=}\hlnum{FALSE}\hlstd{,}
                        \hlkwc{point.col}\hlstd{=}\hlstr{"black"}\hlstd{,}
                        \hlkwc{axis.scales}\hlstd{=}\hlnum{FALSE}\hlstd{))}
\hlstd{\}}
\end{alltt}
\end{kframe}
\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{supp10.1} \hlkwb{<-} \hlkwa{function}\hlstd{()\{}
\hlkwa{if}\hlstd{(}\hlopt{!}\hlkwd{require}\hlstd{(googleVis))}\hlkwd{stop}\hlstd{(}\hlstr{"Package 'googleVis' must be available."}\hlstd{)}
\hlkwa{if}\hlstd{(}\hlopt{!}\hlkwd{exists}\hlstd{(}\hlstr{"WorldBank"}\hlstd{))}\hlkwd{stop}\hlstd{(}\hlstr{"Requires dataset 'Worldbank' to be available."}\hlstd{)}
\hlstd{M} \hlkwb{<-} \hlkwd{gvisMotionChart}\hlstd{(WorldBank,} \hlkwc{idvar}\hlstd{=}\hlstr{"country"}\hlstd{,}
          \hlkwc{timevar}\hlstd{=}\hlstr{"year"}\hlstd{,}
          \hlkwc{xvar}\hlstd{=}\hlstr{"life.expectancy"}\hlstd{,}
          \hlkwc{yvar}\hlstd{=}\hlstr{"fertility.rate"}\hlstd{,}
          \hlkwc{colorvar}\hlstd{=}\hlstr{"region"}\hlstd{,} \hlkwc{sizevar}\hlstd{=}\hlstr{"population"}\hlstd{,}
          \hlkwc{options}\hlstd{=}\hlkwd{list}\hlstd{(}\hlkwc{width}\hlstd{=}\hlnum{700}\hlstd{,} \hlkwc{height}\hlstd{=}\hlnum{600}\hlstd{))}
\hlcom{## Now display the motion chart}
\hlkwd{plot}\hlstd{(M)}
\hlstd{\}}
\end{alltt}
\end{kframe}
\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{fig10.1}\hlstd{()}
\end{alltt}
\end{kframe}
\end{knitrout}

\begin{figure}

\caption{Snapshot of 3-D dynamic display.}\label{fig:rgl-ex}
\end{figure}

\end{document}
